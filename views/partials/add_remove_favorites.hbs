<script>
  document.addEventListener('DOMContentLoaded', () => {

    const favoritesForm = document.querySelector('.favorites-form');
    
    favoritesForm.addEventListener('submit', (event) => {
      const target = event.target;
      console.log('event target is ', target);

      fetch(favoritesForm.action, {
        method: favoritesForm.method,
        body: new URLSearchParams(new FormData(favoritesForm)),
      })
      event.preventDefault();

      const hearts = target.querySelectorAll('.favorite-button img');
      hearts.forEach((heart) => {
        heart.classList.toggle("hidden");
      })
    })

  });
</script>
