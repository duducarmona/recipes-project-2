<main id="user">
  <h1>User profile</h1>
  <a href="/users/logout">
    <button class="small-button">Logout</button>
  </a>
  <form action="{{user.id}}/delete" method="post">
    <button class="delete-button" type="button"><img src="/images/trash-icon-20.png" alt="trash icon"/></button>
  </form>
  <form action="{{user.id}}/update" method="post">
    <label for="username">Username:</label><br>
    <input type="text" name="username" value="{{user.username}}"><br>
    <p>Created on {{user.created_at}}</p>
    <p>Updated on {{user.updated_at}}</p>
    <label for="current-password">Current password:</label><br>
    <input type="password" name="password" placeholder="**********"><br>
    <label for="new-password">New password:</label><br>
    <input type="password" name="new-password" placeholder="**********"><br>
    <label for="confirm-password">Confirm new password:</label><br>
    <input type="password" name="confirm-password" placeholder="**********"><br>
    <button class="button" type="submit">Update</button>
  </form>
  {{#if error}}
  <div id="error-message">{{error}}</div>
  {{/if}}
</main>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    document.querySelectorAll('.delete-button').forEach(deleteButton => {
      deleteButton.addEventListener('click', () => {
        let confirmDelete = confirm('OK to delete?');
        if (confirmDelete) {
          deleteButton.parentNode.submit();
        }
      });
    });
  });
</script>