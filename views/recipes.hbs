<main id="recipes">

  <h1>Recipes</h1>

  <div id="recipe-list">
    {{#each recipes}}
      <div class="recipe">
        <a href="recipes/{{this.id}}"><img src="{{this.image}}" /></a>
        <div class="recipe-info">
          <h2>{{this.title}}</h2>
          <div id="buttons"> 
            <a href="recipes/{{this.id}}">See recipe</a>
            <a href="recipes/{{this.id}}/update">
              <img src="/images/edit-icon-20.png" alt="edit icon" />
            </a>
            <form action="recipes/{{this.id}}/delete" method="post">
              <button class="delete-button" type="button"><img src="/images/trash-icon-20.png" alt="trash icon"/></button>
            </form>
          </div>
          <ul>
            {{#each this.ingredients}}
            <li>{{this.ingredient.name}}</li>
            {{/each}}
          </ul>
        </div>
      </div>
    <hr>
    {{/each}}
  </div>
</main>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    document.querySelectorAll('.delete-button').forEach(deleteButton => {
      deleteButton.addEventListener('click', () => {
        let confirmDelete = confirm('OK to delete?');
        if (confirmDelete) {
          deleteButton.parentNode.submit();
        }
      });
    });
  });
</script>